(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{631:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/mini/spell/pre",function(){return t(5982)}])},5982:function(e,o,t){"use strict";t.r(o);var n=t(5893),l=t(7294),r=t(1649),s=t(1163),a=t(6049),c=t.n(a),i=t(6154),p=t(8e3),d=t.n(p),u=t(4593),m=t(3765);o.default=()=>{let e=(0,r.I0)(),[o,t]=(0,l.useState)(!0),[a,p]=(0,l.useState)(""),[_,h]=(0,l.useState)([]),[x,g]=(0,l.useState)(""),[j,f]=(0,l.useState)({}),w=(0,r.v9)(e=>e.room.currentRoomId),C=(0,r.v9)(e=>e.spell.currentWord),b=(0,s.useRouter)(),k=()=>{if(x.trim()&&j.current){let o={word:x};e((0,m.D3)({input:x})),console.log("currentword111",C),console.log("inputValue",x),console.log("sendData",o),j.current.send("/mini/spell/confirm/".concat(w),{},JSON.stringify(o))}else alert("소켓이 연결되지 않았습니다.")},v=()=>{(0,i.Z)({url:"https://ohogame.shop/api/game/mini/spell",header:{Accept:"application/json","Content-type":"application/json;charset=UTF-8"},method:"POST",data:{id:w}}).then(e=>{let o=e.data;p(o.firstWord+o.secondWord)}).catch(e=>{e.response?b.push({pathname:"/exception",query:{msg:e.response.data}}):console.log(e)})},y=()=>{j.current=u.L.over(()=>{let e=new(d())("https://ohogame.shop/ws");return e})},S=()=>{j.current.connect({},()=>{j.current.subscribe("/topic/game/".concat(w),o=>{console.log("inputValues------------->",x);var t=JSON.parse(o.body);console.log(t),console.log("틀렸or맞았",t.correct),t.correct?(h(e=>[...e,x]),console.log("data.correct",t.correct),console.log("inputValue",x),console.log("inputWords",_),console.log("currentword",C)):(console.log("data.correct",t.correct),alert(t.msg)),e((0,m.D3)({input:""}))})})};return(0,l.useEffect)(()=>{y(),S(),v();let e=setTimeout(()=>{t(!1)},1e3);return()=>{clearTimeout(e)}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(()=>o?(document.body.style.overflow="hidden",(0,n.jsx)("div",{className:c().modalContainer,children:(0,n.jsxs)("div",{className:c().modalContent,children:[(0,n.jsx)("p",{children:"10초 안에 제시된 초성과 일치하는 단어를 입력하세요."}),(0,n.jsx)("p",{children:"*두 글자의 단어만 입력 가능합니다.*"}),(0,n.jsxs)("h4",{children:["제시된 초성: ",a]})]})})):(document.body.style.overflow="initial",null),{}),(0,n.jsxs)("div",{className:c().wrapper,children:[(0,n.jsxs)("div",{className:c().text,children:[(0,n.jsx)("button",{type:"button",onClick:()=>b.back(),children:"Click here to go back"}),(0,n.jsx)("h1",{children:"초성 게임"}),(0,n.jsxs)("label",{children:["단어를 입력하세요:",(0,n.jsx)("input",{type:"text",value:x,onChange:e=>{g(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&k()}})]}),(0,n.jsx)("button",{type:"button",onClick:k,children:"제출"})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:c().redBlock,children:[(0,n.jsx)("img",{src:"/초성_세종대왕_기본.png",style:{position:"absolute",left:"125px",width:"350px",marginTop:"-350px"}}),(0,n.jsx)("div",{className:c().miniBlock1}),(0,n.jsx)("div",{className:c().miniBlock2}),(0,n.jsxs)("h3",{style:{position:"absolute",backgroundColor:"Yellow",left:"250px",zIndex:"1"},children:["초성: ",a]}),(0,n.jsx)("img",{src:"/초성_두루마리.png",style:{position:"absolute",width:"700px",left:"-50px",marginBottom:"-200px",zIndex:"0"}}),(0,n.jsx)("div",{className:c().wordsContainer,children:_.map((e,o)=>(0,n.jsx)("div",{className:c().word,style:{position:"absolute",marginLeft:"100px",marginTop:"250px",left:"".concat(o%7*50,"px"),top:"".concat(30*Math.floor(o/7),"px")},children:e},o))})]})]})]})}},6049:function(e){e.exports={wrapper:"SpellGame_wrapper__MIls_",upperContainer:"SpellGame_upperContainer__r5ZXB",inputContainer:"SpellGame_inputContainer__tYT5x",redBlock:"SpellGame_redBlock__0tDAq",miniBlock1:"SpellGame_miniBlock1__YvVqj",miniBlock2:"SpellGame_miniBlock2__tDl_z",modalContainer:"SpellGame_modalContainer__cTsAY",modalContent:"SpellGame_modalContent__oIJCC",fadeIn:"SpellGame_fadeIn__821fj"}}},function(e){e.O(0,[0,154,593,774,888,179],function(){return e(e.s=631)}),_N_E=e.O()}]);