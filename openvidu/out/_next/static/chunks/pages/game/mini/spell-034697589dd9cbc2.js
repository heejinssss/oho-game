(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{3628:function(e,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/mini/spell",function(){return o(5391)}])},5391:function(e,n,o){"use strict";o.r(n);var t=o(5893),l=o(7294),s=o(1649),r=o(1163),a=o(6049),i=o.n(a),c=o(6154),p=o(8e3),d=o.n(p),u=o(4593),m=o(3765);n.default=()=>{let e=(0,s.I0)(),[n,o]=(0,l.useState)(!0),[a,p]=(0,l.useState)(""),[_,h]=(0,l.useState)([]),[x,g]=(0,l.useState)(""),[f,j]=(0,l.useState)({}),w=(0,s.v9)(e=>e.room.currentRoomId),C=(0,s.v9)(e=>e.spell.currentWord),v=(0,r.useRouter)(),y=()=>{if(x.trim()&&f.current){let n={word:x};e((0,m.D3)({input:x})),console.log("currentword111",C),console.log("inputValue",x),console.log("sendData",n),f.current.send("/mini/spell/confirm/".concat(w),{},JSON.stringify(n))}else alert("소켓이 연결되지 않았습니다.")},N=()=>{(0,c.Z)({url:"https://ohogame.shop/api/game/mini/spell",header:{Accept:"application/json","Content-type":"application/json;charset=UTF-8"},method:"POST",data:{id:w}}).then(e=>{let n=e.data;p(n.firstWord+n.secondWord)}).catch(e=>{e.response?v.push({pathname:"/exception",query:{msg:e.response.data}}):console.log(e)})},S=()=>{f.current=u.L.over(()=>{let e=new(d())("https://ohogame.shop/ws");return e})},k=()=>{f.current.connect({},()=>{f.current.subscribe("/topic/game/".concat(w),n=>{console.log("inputValues------------->",x);var o=JSON.parse(n.body);console.log(o),console.log("틀렸or맞았",o.correct),o.correct?(h(e=>[...e,o.inputWord]),console.log("data.correct",o.correct),console.log("data.inputWord",o.inputWord),console.log("inputWords",_),console.log("currentword",C)):(console.log("data.correct",o.correct),alert(o.msg)),g(""),e((0,m.D3)({input:""}))})})};return(0,l.useEffect)(()=>{S(),k(),N();let e=setTimeout(()=>{o(!1)},1e3);return()=>{clearTimeout(e)}},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(()=>n?(document.body.style.overflow="hidden",(0,t.jsx)("div",{className:i().modalContainer,children:(0,t.jsxs)("div",{className:i().modalContent,children:[(0,t.jsx)("p",{children:"10초 안에 제시된 초성과 일치하는 단어를 입력하세요."}),(0,t.jsx)("p",{children:"*두 글자의 단어만 입력 가능합니다.*"}),(0,t.jsxs)("h4",{children:["제시된 초성: ",a]})]})})):(document.body.style.overflow="initial",null),{}),(0,t.jsxs)("div",{className:i().wrapper,children:[(0,t.jsxs)("div",{className:i().upperContainer,children:[(0,t.jsx)("input",{type:"text",placeholder:"단어를 입력하세요",value:x,onChange:e=>{g(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&y()},className:i().inputContainer}),(0,t.jsx)("button",{type:"button",onClick:y,style:{marginLeft:"20px"},children:"제출"}),(0,t.jsx)("div",{children:(0,t.jsx)("img",{src:"/초성_로고.png",style:{width:"450px"}})})]}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:i().redBlock,children:[(0,t.jsx)("img",{src:"/초성_세종대왕_기본.png",style:{position:"absolute",left:"125px",width:"350px",marginTop:"-350px"}}),(0,t.jsx)("div",{className:i().miniBlock1}),(0,t.jsx)("div",{className:i().miniBlock2}),(0,t.jsxs)("h3",{style:{fontFamily:"ChosunCentennial",position:"absolute",left:"250px",zIndex:"1"},children:["초성은 ",a]}),(0,t.jsx)("img",{src:"/초성_두루마리.png",style:{position:"absolute",width:"700px",left:"-50px",marginBottom:"-200px",zIndex:"0"}}),(0,t.jsx)("div",{className:i().wordsContainer,children:_.map((e,n)=>(0,t.jsx)("div",{className:i().word,style:{position:"absolute",marginLeft:"100px",marginTop:"250px",left:"".concat(n%8*50,"px"),top:"".concat(30*Math.floor(n/8),"px")},children:e},n))})]})]})]})}},6049:function(e){e.exports={wrapper:"SpellGame_wrapper__MIls_",upperContainer:"SpellGame_upperContainer__r5ZXB",inputContainer:"SpellGame_inputContainer__tYT5x",redBlock:"SpellGame_redBlock__0tDAq",miniBlock1:"SpellGame_miniBlock1__YvVqj",miniBlock2:"SpellGame_miniBlock2__tDl_z",modalContainer:"SpellGame_modalContainer__cTsAY",modalContent:"SpellGame_modalContent__oIJCC",fadeIn:"SpellGame_fadeIn__821fj"}}},function(e){e.O(0,[0,154,593,774,888,179],function(){return e(e.s=3628)}),_N_E=e.O()}]);